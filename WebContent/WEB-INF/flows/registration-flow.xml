<?xml version="1.0" encoding="UTF-8"?>

<flow xmlns="http://www.springframework.org/schema/webflow"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/webflow
        http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">



    <var name="admin" class="dao.Admin" />

	 <var name="adminsService" class="service.AdminsService" />

	<var name="patient" class="dao.Patient" />

 	<var name="patientsService" class="service.PatientsService" />
	
	<var name="doctor" class="dao.Doctor" />
	
	 <var name="schedule" class="dao.Schedule" />

     <var name="doctorsService" class="service.DoctorsService" />   

	<view-state id="create-new-account">

		<transition on="go-to-doctors-registration-form" to="doctors-registration-form"></transition>

		<transition on="go-to-patients-registration-form" to="patients-registration-form"></transition>
		
		<transition on="go-to-admins-registration-form" to="admins-registration-form"></transition>

	</view-state>

     <view-state id="admins-registration-form" model="admin">

		<transition on="submit-registration" to="creatingAdmin"></transition>

	</view-state>
	
	<action-state id="creatingAdmin">
		<evaluate expression="adminsService.createAdmin(admin)"></evaluate>
		<transition to="registration-completed"></transition>
	</action-state>


	<view-state id="doctors-registration-form" model="doctor">

		<transition on="submit-registration" to="creatingDoctor"></transition>

	</view-state>
	
	<action-state id="creatingDoctor">
		<evaluate expression="doctorsService.createDoctor(doctor)"></evaluate>
		<transition to="registration-completed"></transition>
	</action-state>
	
	

	




	<view-state id="patients-registration-form" model="patient">

		<transition on="submit-registration" to="creatingPatient"></transition>

	</view-state>

	<action-state id="creatingPatient">
		<evaluate expression="patientsService.createPatient(patient)"></evaluate>
		<transition to="registration-completed"></transition>
	</action-state>


	<view-state id="registration-completed">

	</view-state>
















</flow>